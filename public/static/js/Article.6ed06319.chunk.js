(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{73:function(e,t,a){"use strict";a.r(t);var r=a(17),n=a(18),c=a(20),s=a(19),o=a(21),m=a(2),l=a(8),i=a(0),u=a.n(i),d=a(5),p=a(7),E=a(1),h=Object(p.c)(function(){return{}},function(e){return{onClickDelete:function(t){return e({type:E.m,payload:t})}}})(u.a.memo(function(e){var t=e.article;return e.canModify?u.a.createElement("span",null,u.a.createElement(l.a,{to:"/editor/".concat(t.slug),className:"btn btn-outline-secondary btn-sm"},u.a.createElement("i",{className:"ion-edit"})," Edit Article"),u.a.createElement("button",{className:"btn btn-outline-danger btn-sm",onClick:function(){e.onClickDelete(d.a.Articles.del(t.slug))}},u.a.createElement("i",{className:"ion-trash-a"})," Delete Article")):u.a.createElement("span",null)})),f=Object(i.memo)(function(e){var t=e.article;return u.a.createElement("div",{className:"article-meta"},u.a.createElement(l.a,{to:"/@".concat(t.author.username)},u.a.createElement("img",{src:t.author.image,alt:t.author.username})),u.a.createElement("div",{className:"info"},u.a.createElement(l.a,{to:"/@".concat(t.author.username),className:"author"},t.author.username),u.a.createElement("span",{className:"date"},new Date(t.createdAt).toDateString())),u.a.createElement(h,{canModify:e.canModify,article:t}))}),b=function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(c.a)(this,Object(s.a)(t).call(this))).state={body:""},e.setBody=function(t){e.setState({body:t.target.value})},e.createComment=function(t){t.preventDefault();var a=d.a.Comments.create(e.props.slug,{body:e.state.body});e.setState({body:""}),e.props.onSubmit(a)},e}return Object(o.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){return u.a.createElement("form",{className:"card comment-form",onSubmit:this.createComment},u.a.createElement("div",{className:"card-block"},u.a.createElement("textarea",{className:"form-control",placeholder:"Write a comment...",value:this.state.body,onChange:this.setBody,rows:"3"})),u.a.createElement("div",{className:"card-footer"},u.a.createElement("img",{src:this.props.currentUser.image,className:"comment-author-img",alt:this.props.currentUser.username}),u.a.createElement("button",{className:"btn btn-sm btn-primary",type:"submit"},"Post Comment")))}}]),t}(u.a.PureComponent),g=Object(p.c)(function(){return{}},function(e){return{onSubmit:function(t){return e({type:E.a,payload:t})}}})(u.a.memo(b)),N=Object(p.c)(function(){return{}},function(e){return{onClick:function(t,a){return e({type:E.n,payload:t,commentId:a})}}})(u.a.memo(function(e){return e.show?u.a.createElement("span",{className:"mod-options"},u.a.createElement("i",{className:"ion-trash-a",onClick:function(){var t=d.a.Comments.delete(e.slug,e.commentId);e.onClick(t,e.commentId)}})):null})),v=u.a.memo(function(e){var t=e.comment,a=e.currentUser&&e.currentUser.username===t.author.username;return u.a.createElement("div",{className:"card"},u.a.createElement("div",{className:"card-block"},u.a.createElement("p",{className:"card-text"},t.body)),u.a.createElement("div",{className:"card-footer"},u.a.createElement(l.a,{to:"/@".concat(t.author.username),className:"comment-author"},u.a.createElement("img",{src:t.author.image,className:"comment-author-img",alt:t.author.username})),"\xa0",u.a.createElement(l.a,{to:"/@".concat(t.author.username),className:"comment-author"},t.author.username),u.a.createElement("span",{className:"date-posted"},new Date(t.createdAt).toDateString()),u.a.createElement(N,{show:a,slug:e.slug,commentId:t.id})))}),y=u.a.memo(function(e){return u.a.createElement("div",null,e.comments.map(function(t){return u.a.createElement(v,{comment:t,currentUser:e.currentUser,slug:e.slug,key:t.id})}))}),U=u.a.memo(function(e){return e.currentUser?u.a.createElement("div",{className:"col-xs-12 col-md-8 offset-md-2"},u.a.createElement("div",null,u.a.createElement("list-errors",{errors:e.errors}),u.a.createElement(g,{slug:e.slug,currentUser:e.currentUser})),u.a.createElement(y,{comments:e.comments,slug:e.slug,currentUser:e.currentUser})):u.a.createElement("div",{className:"col-xs-12 col-md-8 offset-md-2"},u.a.createElement("p",null,u.a.createElement(l.a,{to:"/login"},"Sign in"),"\xa0or\xa0",u.a.createElement(l.a,{to:"/register"},"sign up"),"\xa0to add comments on this article."),u.a.createElement(y,{comments:e.comments,slug:e.slug,currentUser:e.currentUser}))}),j=a(67),k=a.n(j),O=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(n.a)(t,[{key:"componentDidMount",value:function(){this.props.onLoad(Promise.all([d.a.Articles.get(this.props.match.params.id),d.a.Comments.forArticle(this.props.match.params.id)]))}},{key:"componentWillUnmount",value:function(){this.props.onUnload()}},{key:"render",value:function(){if(!this.props.article)return null;var e={__html:k()(this.props.article.body,{sanitize:!0})},t=this.props.currentUser&&this.props.currentUser.username===this.props.article.author.username;return u.a.createElement("div",{className:"article-page"},u.a.createElement("div",{className:"banner"},u.a.createElement("div",{className:"container"},u.a.createElement("h1",null,this.props.article.title),u.a.createElement(f,{article:this.props.article,canModify:t}))),u.a.createElement("div",{className:"container page"},u.a.createElement("div",{className:"row article-content"},u.a.createElement("div",{className:"col-xs-12"},u.a.createElement("div",{dangerouslySetInnerHTML:e}),u.a.createElement("ul",{className:"tag-list"},this.props.article.tagList.map(function(e){return u.a.createElement("li",{className:"tag-default tag-pill tag-outline",key:e},e)})))),u.a.createElement("hr",null),u.a.createElement("div",{className:"article-actions"}),u.a.createElement("div",{className:"row"},u.a.createElement(U,{comments:this.props.comments||[],errors:this.props.commentErrors,slug:this.props.match.params.id,currentUser:this.props.currentUser}))))}}]),t}(u.a.PureComponent);t.default=Object(p.c)(function(e){return Object(m.a)({},e.article,{currentUser:e.common.currentUser})},function(e){return{onLoad:function(t){return e({type:E.f,payload:t})},onUnload:function(){return e({type:E.g})}}})(O)}}]);
//# sourceMappingURL=Article.6ed06319.chunk.js.map
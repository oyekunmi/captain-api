{"version":3,"sources":["components/Article/ArticleActions.js","components/Article/ArticleMeta.js","components/Article/CommentInput.js","components/Article/DeleteButton.js","components/Article/Comment.js","components/Article/CommentList.js","components/Article/CommentContainer.js","components/Article/index.js"],"names":["connect","dispatch","onClickDelete","payload","type","DELETE_ARTICLE","React","memo","props","article","canModify","react_default","a","createElement","react_router_dom","to","concat","slug","className","onClick","agent","Articles","del","author","username","src","image","alt","Date","createdAt","toDateString","Article_ArticleActions","CommentInput","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","body","setBody","ev","setState","target","value","createComment","preventDefault","Comments","create","onSubmit","placeholder","onChange","rows","currentUser","PureComponent","ADD_COMMENT","commentId","DELETE_COMMENT","show","delete","comment","Article_DeleteButton","id","comments","map","Article_Comment","key","errors","Article_CommentInput","Article_CommentList","Article","onLoad","Promise","all","get","match","params","forArticle","onUnload","markup","__html","marked","sanitize","title","Article_ArticleMeta","dangerouslySetInnerHTML","tagList","tag","Article_CommentContainer","commentErrors","objectSpread","common","ARTICLE_PAGE_LOADED","ARTICLE_PAGE_UNLOADED"],"mappings":"+LAwCeA,cAAQ,iBAAO,IAlCH,SAAAC,GAAQ,MAAK,CACtCC,cAAe,SAAAC,GAAO,OACpBF,EAAS,CAAEG,KAAMC,IAAgBF,eAgCtBH,CAAwCM,IAAMC,KA7BtC,SAAAC,GACrB,IAAMC,EAAUD,EAAMC,QAItB,OAAID,EAAME,UAENC,EAAAC,EAAAC,cAAA,YAEEF,EAAAC,EAAAC,cAACC,EAAA,EAAD,CACEC,GAAE,WAAAC,OAAaP,EAAQQ,MACvBC,UAAU,oCACVP,EAAAC,EAAAC,cAAA,KAAGK,UAAU,aAHf,iBAMAP,EAAAC,EAAAC,cAAA,UAAQK,UAAU,gCAAgCC,QAb5C,WACVX,EAAMN,cAAckB,IAAMC,SAASC,IAAIb,EAAQQ,SAazCN,EAAAC,EAAAC,cAAA,KAAGK,UAAU,gBADf,oBASJP,EAAAC,EAAAC,cAAA,gBCTWN,iBAtBK,SAAAC,GAClB,IAAMC,EAAUD,EAAMC,QACtB,OACEE,EAAAC,EAAAC,cAAA,OAAKK,UAAU,gBACbP,EAAAC,EAAAC,cAACC,EAAA,EAAD,CAAMC,GAAE,KAAAC,OAAOP,EAAQc,OAAOC,WAC5Bb,EAAAC,EAAAC,cAAA,OAAKY,IAAKhB,EAAQc,OAAOG,MAAOC,IAAKlB,EAAQc,OAAOC,YAGtDb,EAAAC,EAAAC,cAAA,OAAKK,UAAU,QACbP,EAAAC,EAAAC,cAACC,EAAA,EAAD,CAAMC,GAAE,KAAAC,OAAOP,EAAQc,OAAOC,UAAYN,UAAU,UACjDT,EAAQc,OAAOC,UAElBb,EAAAC,EAAAC,cAAA,QAAMK,UAAU,QACb,IAAIU,KAAKnB,EAAQoB,WAAWC,iBAIjCnB,EAAAC,EAAAC,cAACkB,EAAD,CAAgBrB,UAAWF,EAAME,UAAWD,QAASA,OCXrDuB,cACJ,SAAAA,IAAc,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAJ,IACZC,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAF,GAAAO,KAAAH,QACKI,MAAQ,CACXC,KAAM,IAGRR,EAAKS,QAAU,SAAAC,GACbV,EAAKW,SAAS,CAAEH,KAAME,EAAGE,OAAOC,SAGlCb,EAAKc,cAAgB,SAAAJ,GACnBA,EAAGK,iBACH,IAAM7C,EAAUiB,IAAM6B,SAASC,OAAOjB,EAAKzB,MAAMS,KAC/C,CAAEwB,KAAMR,EAAKO,MAAMC,OACrBR,EAAKW,SAAS,CAAEH,KAAM,KACtBR,EAAKzB,MAAM2C,SAAShD,IAfV8B,wEAoBZ,OACEtB,EAAAC,EAAAC,cAAA,QAAMK,UAAU,oBAAoBiC,SAAUf,KAAKW,eACjDpC,EAAAC,EAAAC,cAAA,OAAKK,UAAU,cACbP,EAAAC,EAAAC,cAAA,YAAUK,UAAU,eAClBkC,YAAY,qBACZN,MAAOV,KAAKI,MAAMC,KAClBY,SAAUjB,KAAKM,QACfY,KAAK,OAGT3C,EAAAC,EAAAC,cAAA,OAAKK,UAAU,eACbP,EAAAC,EAAAC,cAAA,OACEY,IAAKW,KAAK5B,MAAM+C,YAAY7B,MAC5BR,UAAU,qBACVS,IAAKS,KAAK5B,MAAM+C,YAAY/B,WAC9Bb,EAAAC,EAAAC,cAAA,UACEK,UAAU,yBACVd,KAAK,UAFP,yBApCiBE,IAAMkD,eA+ClBxD,cAAQ,iBAAO,IApDH,SAAAC,GAAQ,MAAK,CACtCkD,SAAU,SAAAhD,GAAO,OACfF,EAAS,CAAEG,KAAMqD,IAAatD,eAkDnBH,CAAwCM,IAAMC,KAAKyB,IC/BnDhC,cAAQ,iBAAO,IArBH,SAAAC,GAAQ,MAAK,CACtCkB,QAAS,SAAChB,EAASuD,GAAV,OACPzD,EAAS,CAAEG,KAAMuD,IAAgBxD,UAASuD,iBAmB/B1D,CAAwCM,IAAMC,KAhBxC,SAAAC,GAMnB,OAAIA,EAAMoD,KAENjD,EAAAC,EAAAC,cAAA,QAAMK,UAAU,eACdP,EAAAC,EAAAC,cAAA,KAAGK,UAAU,cAAcC,QARrB,WACV,IAAMhB,EAAUiB,IAAM6B,SAASY,OAAOrD,EAAMS,KAAMT,EAAMkD,WACxDlD,EAAMW,QAAQhB,EAASK,EAAMkD,eAUxB,QCWMpD,MAAMC,KA9BL,SAAAC,GACd,IAAMsD,EAAUtD,EAAMsD,QAChBF,EAAOpD,EAAM+C,aACjB/C,EAAM+C,YAAY/B,WAAasC,EAAQvC,OAAOC,SAChD,OACEb,EAAAC,EAAAC,cAAA,OAAKK,UAAU,QACbP,EAAAC,EAAAC,cAAA,OAAKK,UAAU,cACbP,EAAAC,EAAAC,cAAA,KAAGK,UAAU,aAAa4C,EAAQrB,OAEpC9B,EAAAC,EAAAC,cAAA,OAAKK,UAAU,eACbP,EAAAC,EAAAC,cAACC,EAAA,EAAD,CACEC,GAAE,KAAAC,OAAO8C,EAAQvC,OAAOC,UACxBN,UAAU,kBACVP,EAAAC,EAAAC,cAAA,OAAKY,IAAKqC,EAAQvC,OAAOG,MAAOR,UAAU,qBAAqBS,IAAKmC,EAAQvC,OAAOC,YAJvF,OAOEb,EAAAC,EAAAC,cAACC,EAAA,EAAD,CACEC,GAAE,KAAAC,OAAO8C,EAAQvC,OAAOC,UACxBN,UAAU,kBACT4C,EAAQvC,OAAOC,UAElBb,EAAAC,EAAAC,cAAA,QAAMK,UAAU,eACb,IAAIU,KAAKkC,EAAQjC,WAAWC,gBAE/BnB,EAAAC,EAAAC,cAACkD,EAAD,CAAcH,KAAMA,EAAM3C,KAAMT,EAAMS,KAAMyC,UAAWI,EAAQE,SCPxD1D,MAAMC,KAlBD,SAAAC,GAClB,OACEG,EAAAC,EAAAC,cAAA,WAEIL,EAAMyD,SAASC,IAAI,SAAAJ,GACjB,OACEnD,EAAAC,EAAAC,cAACsD,EAAD,CACEL,QAASA,EACTP,YAAa/C,EAAM+C,YACnBtC,KAAMT,EAAMS,KACZmD,IAAKN,EAAQE,UC0BZ1D,MAAMC,KAlCI,SAAAC,GACvB,OAAIA,EAAM+C,YAEN5C,EAAAC,EAAAC,cAAA,OAAKK,UAAU,kCACbP,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,eAAawD,OAAQ7D,EAAM6D,SAC3B1D,EAAAC,EAAAC,cAACyD,EAAD,CAAcrD,KAAMT,EAAMS,KAAMsC,YAAa/C,EAAM+C,eAGrD5C,EAAAC,EAAAC,cAAC0D,EAAD,CACEN,SAAUzD,EAAMyD,SAChBhD,KAAMT,EAAMS,KACZsC,YAAa/C,EAAM+C,eAKvB5C,EAAAC,EAAAC,cAAA,OAAKK,UAAU,kCACbP,EAAAC,EAAAC,cAAA,SACEF,EAAAC,EAAAC,cAACC,EAAA,EAAD,CAAMC,GAAG,UAAT,WADF,aAGEJ,EAAAC,EAAAC,cAACC,EAAA,EAAD,CAAMC,GAAG,aAAT,WAHF,wCAOAJ,EAAAC,EAAAC,cAAC0D,EAAD,CACEN,SAAUzD,EAAMyD,SAChBhD,KAAMT,EAAMS,KACZsC,YAAa/C,EAAM+C,kCCbvBiB,8LAEFpC,KAAK5B,MAAMiE,OAAOC,QAAQC,IAAI,CAC5BvD,IAAMC,SAASuD,IAAIxC,KAAK5B,MAAMqE,MAAMC,OAAOd,IAC3C5C,IAAM6B,SAAS8B,WAAW3C,KAAK5B,MAAMqE,MAAMC,OAAOd,sDAKpD5B,KAAK5B,MAAMwE,4CAIX,IAAK5C,KAAK5B,MAAMC,QACd,OAAO,KAGT,IAAMwE,EAAS,CAAEC,OAAQC,IAAO/C,KAAK5B,MAAMC,QAAQgC,KAAM,CAAE2C,UAAU,KAC/D1E,EAAY0B,KAAK5B,MAAM+C,aAC3BnB,KAAK5B,MAAM+C,YAAY/B,WAAaY,KAAK5B,MAAMC,QAAQc,OAAOC,SAChE,OACEb,EAAAC,EAAAC,cAAA,OAAKK,UAAU,gBAEbP,EAAAC,EAAAC,cAAA,OAAKK,UAAU,UACbP,EAAAC,EAAAC,cAAA,OAAKK,UAAU,aAEbP,EAAAC,EAAAC,cAAA,UAAKuB,KAAK5B,MAAMC,QAAQ4E,OACxB1E,EAAAC,EAAAC,cAACyE,EAAD,CACE7E,QAAS2B,KAAK5B,MAAMC,QACpBC,UAAWA,MAKjBC,EAAAC,EAAAC,cAAA,OAAKK,UAAU,kBAEbP,EAAAC,EAAAC,cAAA,OAAKK,UAAU,uBACbP,EAAAC,EAAAC,cAAA,OAAKK,UAAU,aAEbP,EAAAC,EAAAC,cAAA,OAAK0E,wBAAyBN,IAE9BtE,EAAAC,EAAAC,cAAA,MAAIK,UAAU,YAEVkB,KAAK5B,MAAMC,QAAQ+E,QAAQtB,IAAI,SAAAuB,GAC7B,OACE9E,EAAAC,EAAAC,cAAA,MACEK,UAAU,mCACVkD,IAAKqB,GACJA,QAUf9E,EAAAC,EAAAC,cAAA,WAEAF,EAAAC,EAAAC,cAAA,OAAKK,UAAU,oBAGfP,EAAAC,EAAAC,cAAA,OAAKK,UAAU,OACbP,EAAAC,EAAAC,cAAC6E,EAAD,CACEzB,SAAU7B,KAAK5B,MAAMyD,UAAY,GACjCI,OAAQjC,KAAK5B,MAAMmF,cACnB1E,KAAMmB,KAAK5B,MAAMqE,MAAMC,OAAOd,GAC9BT,YAAanB,KAAK5B,MAAM+C,wBApEhBjD,IAAMkD,eA4EbxD,sBAxFS,SAAAwC,GAAK,OAAAN,OAAA0D,EAAA,EAAA1D,CAAA,GACxBM,EAAM/B,QADkB,CAE3B8C,YAAaf,EAAMqD,OAAOtC,eAGD,SAAAtD,GAAQ,MAAK,CACtCwE,OAAQ,SAAAtE,GAAO,OACbF,EAAS,CAAEG,KAAM0F,IAAqB3F,aACxC6E,SAAU,kBACR/E,EAAS,CAAEG,KAAM2F,SA+EN/F,CAA6CwE","file":"static/js/Article.6ed06319.chunk.js","sourcesContent":["import { Link } from 'react-router-dom';\r\nimport React from 'react';\r\nimport agent from '../../agent';\r\nimport { connect } from 'react-redux';\r\nimport { DELETE_ARTICLE } from '../../constants/actionTypes';\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  onClickDelete: payload =>\r\n    dispatch({ type: DELETE_ARTICLE, payload })\r\n});\r\n\r\nconst ArticleActions = props => {\r\n  const article = props.article;\r\n  const del = () => {\r\n    props.onClickDelete(agent.Articles.del(article.slug))\r\n  };\r\n  if (props.canModify) {\r\n    return (\r\n      <span>\r\n\r\n        <Link\r\n          to={`/editor/${article.slug}`}\r\n          className=\"btn btn-outline-secondary btn-sm\">\r\n          <i className=\"ion-edit\"></i> Edit Article\r\n        </Link>\r\n\r\n        <button className=\"btn btn-outline-danger btn-sm\" onClick={del}>\r\n          <i className=\"ion-trash-a\"></i> Delete Article\r\n        </button>\r\n\r\n      </span>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <span>\r\n    </span>\r\n  );\r\n};\r\n\r\nexport default connect(() => ({}), mapDispatchToProps)(React.memo(ArticleActions));\r\n","import ArticleActions from './ArticleActions';\r\nimport { Link } from 'react-router-dom';\r\nimport React, {memo} from 'react';\r\n\r\nconst ArticleMeta = props => {\r\n  const article = props.article;\r\n  return (\r\n    <div className=\"article-meta\">\r\n      <Link to={`/@${article.author.username}`}>\r\n        <img src={article.author.image} alt={article.author.username} />\r\n      </Link>\r\n\r\n      <div className=\"info\">\r\n        <Link to={`/@${article.author.username}`} className=\"author\">\r\n          {article.author.username}\r\n        </Link>\r\n        <span className=\"date\">\r\n          {new Date(article.createdAt).toDateString()}\r\n        </span>\r\n      </div>\r\n\r\n      <ArticleActions canModify={props.canModify} article={article} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default memo(ArticleMeta);\r\n","import React from 'react';\r\nimport agent from '../../agent';\r\nimport { connect } from 'react-redux';\r\nimport { ADD_COMMENT } from '../../constants/actionTypes';\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  onSubmit: payload =>\r\n    dispatch({ type: ADD_COMMENT, payload })\r\n});\r\n\r\nclass CommentInput extends React.PureComponent {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      body: ''\r\n    };\r\n\r\n    this.setBody = ev => {\r\n      this.setState({ body: ev.target.value });\r\n    };\r\n\r\n    this.createComment = ev => {\r\n      ev.preventDefault();\r\n      const payload = agent.Comments.create(this.props.slug,\r\n        { body: this.state.body });\r\n      this.setState({ body: '' });\r\n      this.props.onSubmit(payload);\r\n    };\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <form className=\"card comment-form\" onSubmit={this.createComment}>\r\n        <div className=\"card-block\">\r\n          <textarea className=\"form-control\"\r\n            placeholder=\"Write a comment...\"\r\n            value={this.state.body}\r\n            onChange={this.setBody}\r\n            rows=\"3\">\r\n          </textarea>\r\n        </div>\r\n        <div className=\"card-footer\">\r\n          <img\r\n            src={this.props.currentUser.image}\r\n            className=\"comment-author-img\"\r\n            alt={this.props.currentUser.username} />\r\n          <button\r\n            className=\"btn btn-sm btn-primary\"\r\n            type=\"submit\">\r\n            Post Comment\r\n          </button>\r\n        </div>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(() => ({}), mapDispatchToProps)(React.memo(CommentInput));\r\n","import React from 'react';\r\nimport agent from '../../agent';\r\nimport { connect } from 'react-redux';\r\nimport { DELETE_COMMENT } from '../../constants/actionTypes';\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  onClick: (payload, commentId) =>\r\n    dispatch({ type: DELETE_COMMENT, payload, commentId })\r\n});\r\n\r\nconst DeleteButton = props => {\r\n  const del = () => {\r\n    const payload = agent.Comments.delete(props.slug, props.commentId);\r\n    props.onClick(payload, props.commentId);\r\n  };\r\n\r\n  if (props.show) {\r\n    return (\r\n      <span className=\"mod-options\">\r\n        <i className=\"ion-trash-a\" onClick={del}></i>\r\n      </span>\r\n    );\r\n  }\r\n  return null;\r\n};\r\n\r\nexport default connect(() => ({}), mapDispatchToProps)(React.memo(DeleteButton));\r\n","import DeleteButton from './DeleteButton';\r\nimport { Link } from 'react-router-dom';\r\nimport React from 'react';\r\n\r\nconst Comment = props => {\r\n  const comment = props.comment;\r\n  const show = props.currentUser &&\r\n    props.currentUser.username === comment.author.username;\r\n  return (\r\n    <div className=\"card\">\r\n      <div className=\"card-block\">\r\n        <p className=\"card-text\">{comment.body}</p>\r\n      </div>\r\n      <div className=\"card-footer\">\r\n        <Link\r\n          to={`/@${comment.author.username}`}\r\n          className=\"comment-author\">\r\n          <img src={comment.author.image} className=\"comment-author-img\" alt={comment.author.username} />\r\n        </Link>\r\n        &nbsp;\r\n        <Link\r\n          to={`/@${comment.author.username}`}\r\n          className=\"comment-author\">\r\n          {comment.author.username}\r\n        </Link>\r\n        <span className=\"date-posted\">\r\n          {new Date(comment.createdAt).toDateString()}\r\n        </span>\r\n        <DeleteButton show={show} slug={props.slug} commentId={comment.id} />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(Comment);\r\n","import Comment from './Comment';\r\nimport React from 'react';\r\n\r\nconst CommentList = props => {\r\n  return (\r\n    <div>\r\n      {\r\n        props.comments.map(comment => {\r\n          return (\r\n            <Comment\r\n              comment={comment}\r\n              currentUser={props.currentUser}\r\n              slug={props.slug}\r\n              key={comment.id} />\r\n          );\r\n        })\r\n      }\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(CommentList);\r\n","import CommentInput from './CommentInput';\r\nimport CommentList from './CommentList';\r\nimport { Link } from 'react-router-dom';\r\nimport React from 'react';\r\n\r\nconst CommentContainer = props => {\r\n  if (props.currentUser) {\r\n    return (\r\n      <div className=\"col-xs-12 col-md-8 offset-md-2\">\r\n        <div>\r\n          <list-errors errors={props.errors}></list-errors>\r\n          <CommentInput slug={props.slug} currentUser={props.currentUser} />\r\n        </div>\r\n\r\n        <CommentList\r\n          comments={props.comments}\r\n          slug={props.slug}\r\n          currentUser={props.currentUser} />\r\n      </div>\r\n    );\r\n  } else {\r\n    return (\r\n      <div className=\"col-xs-12 col-md-8 offset-md-2\">\r\n        <p>\r\n          <Link to=\"/login\">Sign in</Link>\r\n          &nbsp;or&nbsp;\r\n          <Link to=\"/register\">sign up</Link>\r\n          &nbsp;to add comments on this article.\r\n        </p>\r\n\r\n        <CommentList\r\n          comments={props.comments}\r\n          slug={props.slug}\r\n          currentUser={props.currentUser} />\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nexport default React.memo(CommentContainer);\r\n","import ArticleMeta from './ArticleMeta';\r\nimport CommentContainer from './CommentContainer';\r\nimport React from 'react';\r\nimport agent from '../../agent';\r\nimport { connect } from 'react-redux';\r\nimport marked from 'marked';\r\nimport { ARTICLE_PAGE_LOADED, ARTICLE_PAGE_UNLOADED } from '../../constants/actionTypes';\r\n\r\nconst mapStateToProps = state => ({\r\n  ...state.article,\r\n  currentUser: state.common.currentUser\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  onLoad: payload =>\r\n    dispatch({ type: ARTICLE_PAGE_LOADED, payload }),\r\n  onUnload: () =>\r\n    dispatch({ type: ARTICLE_PAGE_UNLOADED })\r\n});\r\n\r\nclass Article extends React.PureComponent {\r\n  componentDidMount() {\r\n    this.props.onLoad(Promise.all([\r\n      agent.Articles.get(this.props.match.params.id),\r\n      agent.Comments.forArticle(this.props.match.params.id)\r\n    ]));\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.props.onUnload();\r\n  }\r\n\r\n  render() {\r\n    if (!this.props.article) {\r\n      return null;\r\n    }\r\n\r\n    const markup = { __html: marked(this.props.article.body, { sanitize: true }) };\r\n    const canModify = this.props.currentUser &&\r\n      this.props.currentUser.username === this.props.article.author.username;\r\n    return (\r\n      <div className=\"article-page\">\r\n\r\n        <div className=\"banner\">\r\n          <div className=\"container\">\r\n\r\n            <h1>{this.props.article.title}</h1>\r\n            <ArticleMeta\r\n              article={this.props.article}\r\n              canModify={canModify} />\r\n\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"container page\">\r\n\r\n          <div className=\"row article-content\">\r\n            <div className=\"col-xs-12\">\r\n\r\n              <div dangerouslySetInnerHTML={markup}></div>\r\n\r\n              <ul className=\"tag-list\">\r\n                {\r\n                  this.props.article.tagList.map(tag => {\r\n                    return (\r\n                      <li\r\n                        className=\"tag-default tag-pill tag-outline\"\r\n                        key={tag}>\r\n                        {tag}\r\n                      </li>\r\n                    );\r\n                  })\r\n                }\r\n              </ul>\r\n\r\n            </div>\r\n          </div>\r\n\r\n          <hr />\r\n\r\n          <div className=\"article-actions\">\r\n          </div>\r\n\r\n          <div className=\"row\">\r\n            <CommentContainer\r\n              comments={this.props.comments || []}\r\n              errors={this.props.commentErrors}\r\n              slug={this.props.match.params.id}\r\n              currentUser={this.props.currentUser} />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Article);\r\n"],"sourceRoot":""}
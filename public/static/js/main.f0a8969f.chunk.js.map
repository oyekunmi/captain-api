{"version":3,"sources":["constants/actionTypes.js","agent.js","middleware.js","reducer.js","reducers/common.js","reducers/auth.js","reducers/home.js","reducers/vessels.js","reducers/certificate.js","store.js","components/Header.js","components/App.js","index.js"],"names":["__webpack_require__","d","__webpack_exports__","APP_LOAD","REDIRECT","HOME_PAGE_LOADED","HOME_PAGE_UNLOADED","CHANGE_TAB","LOGIN","LOGOUT","LOGIN_PAGE_UNLOADED","ASYNC_START","ASYNC_END","UPDATE_FIELD_AUTH","VESSEL_PAGE_LOADED","LOAD_CERTIFICATES","ADD_CERTIFICATE_PAGE_LOADED","ADD_CERTIFICATE_PAGE_UNLOADED","ADD_CERTIFICATE","UPDATE_FIELD_CERTIFICATE","global","superagent_promise__WEBPACK_IMPORTED_MODULE_0__","superagent_promise__WEBPACK_IMPORTED_MODULE_0___default","n","superagent__WEBPACK_IMPORTED_MODULE_1__","superagent__WEBPACK_IMPORTED_MODULE_1___default","superagent","superagentPromise","_superagent","Promise","API_ROOT","VESSEL_API_ROOT","responseBody","res","body","token","tokenPlugin","req","set","concat","requests","url","get","use","then","put","post","vesselRequests","Auth","current","login","password","register","username","email","user","save","Vessels","all","id","Certificates","byVessel","cert","vessel_id","setToken","_token","promiseMiddleware","store","next","action","v","payload","dispatch","type","subtype","currentView","getState","viewChangeCounter","skipTracking","currentState","console","log","promise","error","response","localStorageMiddleware","window","localStorage","setItem","agent","history","defaultState","appName","common","state","arguments","length","undefined","Object","objectSpread","appLoaded","currentUser","redirectTo","vessels","auth","inProgress","errors","defineProperty","key","value","home","vessel","certificates","certificate","createBrowserHistory","myRouterMiddleware","routerMiddleware","createStore","combineReducers","router","connectRouter","composeWithDevTools","applyMiddleware","LoggedOutView","React","memo","props","react_default","a","createElement","className","react_router_dom","to","LoggedInView","src","image","alt","display_name","Header","this","toLowerCase","PureComponent","Home","lazy","e","bind","Login","Vessel","AddCertificate","App","prevProps","push","onRedirect","getItem","onLoad","components_Header","react","fallback","react_router","exact","path","component","connect","ReactDOM","render","es","esm","document","getElementById"],"mappings":"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","file":"static/js/main.f0a8969f.chunk.js","sourcesContent":["export const APP_LOAD = 'APP_LOAD';\r\nexport const REDIRECT = 'REDIRECT';\r\nexport const HOME_PAGE_LOADED = 'HOME_PAGE_LOADED';\r\nexport const HOME_PAGE_UNLOADED = 'HOME_PAGE_UNLOADED';\r\nexport const SET_PAGE = 'SET_PAGE';\r\nexport const CHANGE_TAB = 'CHANGE_TAB';\r\nexport const LOGIN = 'LOGIN';\r\nexport const LOGOUT = 'LOGOUT';\r\n// export const LOGIN_PAGE_LOADED = 'LOGIN_PAGE_LOADED';\r\nexport const LOGIN_PAGE_UNLOADED = 'LOGIN_PAGE_UNLOADED';\r\nexport const ASYNC_START = 'ASYNC_START';\r\nexport const ASYNC_END = 'ASYNC_END';\r\nexport const UPDATE_FIELD_AUTH = 'UPDATE_FIELD_AUTH';\r\nexport const VESSEL_PAGE_LOADED = 'VESSEL_PAGE_LOADED';\r\nexport const LOAD_CERTIFICATES = 'LOAD_CERTIFICATES';\r\nexport const ADD_CERTIFICATE_PAGE_LOADED = 'ADD_CERTIFICATE_PAGE_LOADED';\r\nexport const ADD_CERTIFICATE_PAGE_UNLOADED = 'ADD_CERTIFICATE_PAGE_UNLOADED';\r\nexport const ADD_CERTIFICATE = 'ADD_CERTIFICATE';\r\nexport const UPDATE_FIELD_CERTIFICATE = 'UPDATE_FIELD_CERTIFICATE';","import superagentPromise from 'superagent-promise';\r\nimport _superagent from 'superagent';\r\n\r\nconst superagent = superagentPromise(_superagent, global.Promise);\r\n\r\nconst API_ROOT = 'https://captain.moovelogic.com/api';\r\nconst VESSEL_API_ROOT = 'https://captain.moovelogic.com/api';\r\n// const VESSEL_API_ROOT = 'http://localhost:8081/api';\r\n// const API_ROOT = 'http://localhost:8081/api';\r\n\r\n// const encode = encodeURIComponent;\r\nconst responseBody = res => res.body;\r\n\r\nlet token = null;\r\nconst tokenPlugin = req => {\r\n  if (token) {\r\n    req.set('Authorization', `Bearer ${token}`);\r\n  }\r\n}\r\n\r\nconst requests = {\r\n  del: url =>\r\n    superagent.del(`${API_ROOT}${url}`).use(tokenPlugin).then(responseBody),\r\n  get: url =>\r\n    superagent.get(`${API_ROOT}${url}`).use(tokenPlugin).then(responseBody),\r\n  put: (url, body) =>\r\n    superagent.put(`${API_ROOT}${url}`, body).use(tokenPlugin).then(responseBody),\r\n  post: (url, body) =>\r\n    superagent.post(`${API_ROOT}${url}`, body).use(tokenPlugin).then(responseBody)\r\n};\r\n\r\nconst vesselRequests = {\r\n  del: url =>\r\n    superagent.del(`${VESSEL_API_ROOT}${url}`).use(tokenPlugin).then(responseBody),\r\n  get: url =>\r\n    superagent.get(`${VESSEL_API_ROOT}${url}`).use(tokenPlugin).then(responseBody),\r\n  put: (url, body) =>\r\n    superagent.put(`${VESSEL_API_ROOT}${url}`, body).use(tokenPlugin).then(responseBody),\r\n  post: (url, body) =>\r\n    superagent.post(`${VESSEL_API_ROOT}${url}`, body).use(tokenPlugin).then(responseBody)\r\n};\r\n\r\n\r\nconst Auth = {\r\n  current: () =>\r\n    requests.get('/v1/user'),\r\n  login: (password) =>\r\n    requests.post('/v1/auth', { token: password }),\r\n  register: (username, email, password) =>\r\n    requests.post('/users', { user: { username, email, password } }),\r\n  save: user =>\r\n    requests.put('/user', { user })\r\n};\r\n\r\nconst Vessels = {\r\n  all: () =>  vesselRequests.get('/vessels'),\r\n  get: (id) => vesselRequests.get(`/vessels/${id}`),\r\n};\r\n\r\nconst Certificates = {\r\n  byVessel: (id) => vesselRequests.get(`/vessels/${id}/certificates`),\r\n  save: cert => requests.post(`/vessels/${cert.vessel_id}/certificates`, cert)\r\n}\r\n\r\nexport default {\r\n  Auth,\r\n  Vessels,\r\n  Certificates,\r\n  setToken: _token => { token = _token; }\r\n};\r\n","import agent from './agent';\r\nimport {\r\n  ASYNC_START,\r\n  ASYNC_END,\r\n  LOGIN,\r\n  LOGOUT,\r\n} from './constants/actionTypes';\r\n\r\nconst promiseMiddleware = store => next => action => {\r\n  if (isPromise(action.payload)) {\r\n    store.dispatch({ type: ASYNC_START, subtype: action.type });\r\n\r\n    const currentView = store.getState().viewChangeCounter;\r\n    const skipTracking = action.skipTracking;\r\n\r\n    action.payload.then(\r\n      res => {\r\n        const currentState = store.getState()\r\n        if (!skipTracking && currentState.viewChangeCounter !== currentView) {\r\n          return\r\n        }\r\n        console.log('RESULT', res);\r\n        action.payload = res;\r\n        store.dispatch({ type: ASYNC_END, promise: action.payload });\r\n        store.dispatch(action);\r\n      },\r\n      error => {\r\n        const currentState = store.getState()\r\n        if (!skipTracking && currentState.viewChangeCounter !== currentView) {\r\n          return\r\n        }\r\n        console.log('ERROR', error);\r\n        action.error = true;\r\n        action.payload = error.response.body;\r\n        if (!action.skipTracking) {\r\n          store.dispatch({ type: ASYNC_END, promise: action.payload });\r\n        }\r\n        store.dispatch(action);\r\n      }\r\n    );\r\n\r\n    return;\r\n  }\r\n\r\n  next(action);\r\n};\r\n\r\nconst localStorageMiddleware = store => next => action => {\r\n  if (action.type === LOGIN) {\r\n    if (!action.error) {\r\n      window.localStorage.setItem('jwt', action.payload.user.token);\r\n      agent.setToken(action.payload.user.token);\r\n    }\r\n  } else if (action.type === LOGOUT) {\r\n    window.localStorage.setItem('jwt', '');\r\n    agent.setToken(null);\r\n  }\r\n\r\n  next(action);\r\n};\r\n\r\nfunction isPromise(v) {\r\n  return v && typeof v.then === 'function';\r\n}\r\n\r\n\r\nexport { promiseMiddleware, localStorageMiddleware }","import { combineReducers } from 'redux';\r\nimport common from './reducers/common';\r\nimport auth from './reducers/auth';\r\nimport home from './reducers/home';\r\nimport vessels from './reducers/vessels';\r\nimport certificate from './reducers/certificate';\r\nimport { connectRouter } from 'connected-react-router';\r\n\r\nexport default (history) => combineReducers({\r\n  common,\r\n  auth,\r\n  home,\r\n  vessels,\r\n  certificate,\r\n  router: connectRouter(history)\r\n});\r\n","import {\r\n  APP_LOAD,\r\n  REDIRECT,\r\n  LOGOUT,\r\n  LOGIN,\r\n  ADD_CERTIFICATE,\r\n  HOME_PAGE_LOADED\r\n} from '../constants/actionTypes';\r\n\r\nconst defaultState = {\r\n  appName: 'Captain',\r\n  token: null,\r\n};\r\n\r\nexport default (state = defaultState, action) => {\r\n  switch (action.type) {\r\n    case APP_LOAD:\r\n      return {\r\n        ...state,\r\n        token: action.token || null,\r\n        appLoaded: true,\r\n        currentUser: action.payload ? action.payload.user : null,\r\n        redirectTo: action.token ? null: '/login'\r\n      };\r\n    case REDIRECT:\r\n      return { ...state, redirectTo: null };\r\n    case LOGIN:\r\n      return {\r\n        ...state,\r\n        redirectTo: action.error ? null : '/',\r\n        token: action.error ? null : action.payload.user.token,\r\n        currentUser: action.error ? null : action.payload.user\r\n      }\r\n    case HOME_PAGE_LOADED:\r\n      return {\r\n        ...state,\r\n        vessels: action.payload[0]\r\n      };\r\n    case ADD_CERTIFICATE:\r\n      return {\r\n        ...state,\r\n        redirectTo: action.error ? null : '/'\r\n      }\r\n    \r\n    case LOGOUT:\r\n      return { ...state, redirectTo: '/', token: null, currentUser: null };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import {\r\n  LOGIN,\r\n  // LOGIN_PAGE_LOADED,\r\n  LOGIN_PAGE_UNLOADED,\r\n  ASYNC_START,\r\n  UPDATE_FIELD_AUTH,\r\n} from '../constants/actionTypes';\r\n\r\nconst defaultState = {\r\n  password: '',\r\n};\r\n\r\nexport default (state = defaultState, action) => {\r\n  switch (action.type) {\r\n    // case LOGIN_PAGE_LOADED:\r\n    //   return {...state, password: ''}\r\n    case LOGIN_PAGE_UNLOADED:\r\n      return {};\r\n    case LOGIN:\r\n      return {\r\n        ...state,\r\n        inProgress: false,\r\n        errors: action.error ? action.payload.errors : null,\r\n      };\r\n    case ASYNC_START:\r\n      if (action.subtype === LOGIN) {\r\n        return { ...state, inProgress: true };\r\n      }\r\n      break;\r\n    case UPDATE_FIELD_AUTH:\r\n      return { ...state, [action.key]: action.value };\r\n    default:\r\n      return state;\r\n  }\r\n\r\n  return state;\r\n};","import { HOME_PAGE_UNLOADED, LOAD_CERTIFICATES } from '../constants/actionTypes';\r\n\r\nexport default (state = {}, action) => {\r\n  switch (action.type) {\r\n    case LOAD_CERTIFICATES:\r\n      return {\r\n        ...state,\r\n        vessel: action.payload[0],\r\n        certificates: action.payload[1],\r\n      }\r\n    case HOME_PAGE_UNLOADED:\r\n      return {};\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import {\r\n  HOME_PAGE_LOADED,\r\n  HOME_PAGE_UNLOADED,\r\n} from '../constants/actionTypes';\r\n\r\nexport default (state = {}, action) => {\r\n  switch (action.type) {\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import {\r\n  ADD_CERTIFICATE_PAGE_LOADED,\r\n  ADD_CERTIFICATE_PAGE_UNLOADED,\r\n  UPDATE_FIELD_CERTIFICATE,\r\n  ADD_CERTIFICATE,\r\n  ASYNC_START,\r\n} from './../constants/actionTypes';\r\n\r\nconst defaultState = {\r\n\r\n};\r\n\r\nexport default (state = defaultState, action) => {\r\n  switch(action.type){\r\n    case ADD_CERTIFICATE_PAGE_LOADED:\r\n      return {\r\n        ...state,\r\n        vessels: action.payload[0]\r\n      };\r\n    case UPDATE_FIELD_CERTIFICATE:\r\n      return { ...state, [action.key]: action.value };\r\n    case ADD_CERTIFICATE:\r\n      return {\r\n        inProgress: false,\r\n        errors: action.error ? action.payload.errors : null,\r\n      }\r\n    case ASYNC_START:\r\n      if (action.subtype === ADD_CERTIFICATE) {\r\n        return { ...state, inProgress: true };\r\n      }\r\n      return state;\r\n    case ADD_CERTIFICATE_PAGE_UNLOADED:\r\n      return {};\r\n    default:\r\n      return state;\r\n  }\r\n\r\n};","import { applyMiddleware, createStore } from 'redux';\r\nimport { createLogger } from 'redux-logger'\r\nimport { composeWithDevTools } from 'redux-devtools-extension/developmentOnly';\r\nimport { promiseMiddleware, localStorageMiddleware } from './middleware';\r\nimport createRootReducer from './reducer';\r\n\r\nimport { routerMiddleware } from 'connected-react-router';\r\nimport { createBrowserHistory} from 'history';\r\n\r\nexport const history = createBrowserHistory();\r\n\r\n// Build the middleware for intercepting and dispatching navigation actions\r\nconst myRouterMiddleware = routerMiddleware(history);\r\n\r\nconst getMiddleware = () => {\r\n  if (process.env.NODE_ENV === 'production') {\r\n    return applyMiddleware(myRouterMiddleware, promiseMiddleware, localStorageMiddleware);\r\n  } else {\r\n    // Enable additional logging in non-production environments.\r\n    return applyMiddleware(myRouterMiddleware, promiseMiddleware, localStorageMiddleware, createLogger())\r\n  }\r\n};\r\n\r\nexport const store = createStore(\r\n  createRootReducer(history), composeWithDevTools(getMiddleware()));\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst LoggedOutView = React.memo(props => {\r\n  if (!props.currentUser) {\r\n    return (\r\n      <ul className=\"nav navbar-nav pull-xs-right\">\r\n\r\n        <li className=\"nav-item\">\r\n          <Link to=\"/\" className=\"nav-link\">\r\n            Home\r\n          </Link>\r\n        </li>\r\n\r\n        <li className=\"nav-item\">\r\n          <Link to=\"/login\" className=\"nav-link\">\r\n            Sign in\r\n          </Link>\r\n        </li>\r\n\r\n        {/* <li className=\"nav-item\">\r\n          <Link to=\"/register\" className=\"nav-link\">\r\n            Sign up\r\n          </Link>\r\n        </li> */}\r\n\r\n      </ul>\r\n    );\r\n  }\r\n  return null;\r\n});\r\n\r\nconst LoggedInView = React.memo(props => {\r\n  if (props.currentUser) {\r\n    return (\r\n      <ul className=\"nav navbar-nav pull-xs-right\">\r\n\r\n        <li className=\"nav-item\">\r\n          <Link to=\"/\" className=\"nav-link\">\r\n            Home\r\n          </Link>\r\n        </li>\r\n\r\n        {/* <li className=\"nav-item\">\r\n          <Link to=\"/editor\" className=\"nav-link\">\r\n            <i className=\"ion-compose\"></i>&nbsp;Add Certificate\r\n          </Link>\r\n        </li> */}\r\n\r\n        <li className=\"nav-item\">\r\n          <Link to=\"/certificate/add\" className=\"nav-link\">\r\n            <i className=\"ion-gear-a\"></i>&nbsp;Add Certificate\r\n          </Link>\r\n        </li>\r\n\r\n        <li className=\"nav-item\">\r\n          <Link\r\n            to={`/@${props.currentUser.username}`}\r\n            className=\"nav-link\">\r\n            <img src={props.currentUser.image} className=\"user-pic\" alt={props.currentUser.username} />\r\n            Welcome, {props.currentUser.display_name}\r\n          </Link>\r\n        </li>\r\n\r\n      </ul>\r\n    );\r\n  }\r\n\r\n  return null;\r\n});\r\n\r\nclass Header extends React.PureComponent {\r\n  render() {\r\n    return (\r\n      <nav className=\"navbar navbar-light\">\r\n        <div className=\"container\">\r\n\r\n          <Link to=\"/\" className=\"navbar-brand\">\r\n            {this.props.appName.toLowerCase()}\r\n          </Link>\r\n\r\n          <LoggedOutView currentUser={this.props.currentUser} />\r\n\r\n          <LoggedInView currentUser={this.props.currentUser} />\r\n        </div>\r\n      </nav>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Header;","import agent from '../agent'\r\nimport Header from './Header'\r\nimport React, { lazy, Suspense } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { APP_LOAD, REDIRECT } from '../constants/actionTypes'\r\nimport { Route, Switch } from 'react-router-dom'\r\nimport { store } from '../store'\r\nimport { push } from 'connected-react-router'\r\n\r\nconst Home = lazy(() => import('../components/Home'/* webpackChunkName: \"Home\", webpackPreload: true  */))\r\n// import Home from '../components/Home'\r\nconst Login = lazy(() => import('../components/Login'/* webpackChunkName: \"Login\", webpackPrefetch: true  */))\r\nconst Vessel = lazy(() => import('../components/Vessel'/* webpackChunkName: \"Settings\", webpackPrefetch: true  */))\r\nconst AddCertificate = lazy(() => import('../components/Certificate/AddCertificate'))\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    appLoaded: state.common.appLoaded,\r\n    appName: state.common.appName,\r\n    currentUser: state.common.currentUser,\r\n    redirectTo: state.common.redirectTo\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  onLoad: (payload, token) =>\r\n    dispatch({ type: APP_LOAD, payload, token, skipTracking: true }),\r\n  onRedirect: () =>\r\n    dispatch({ type: REDIRECT })\r\n})\r\n\r\nclass App extends React.PureComponent {\r\n  componentDidUpdate (prevProps) {\r\n    if (this.props.redirectTo && this.props.redirectTo !== prevProps.redirectTo) {\r\n      // this.context.router.replace(this.props.redirectTo);\r\n      store.dispatch(push(this.props.redirectTo))\r\n      this.props.onRedirect()\r\n    }\r\n  }\r\n\r\n  componentDidMount () {\r\n    const token = window.localStorage.getItem('jwt')\r\n    if (token) {\r\n      agent.setToken(token)\r\n    }\r\n\r\n    this.props.onLoad(token ? agent.Auth.current() : null, token)\r\n  }\r\n\r\n  render () {\r\n    if (this.props.appLoaded) {\r\n      return (\r\n        <div>\r\n          <Header\r\n            appName={this.props.appName}\r\n            currentUser={this.props.currentUser} />\r\n            <Suspense fallback={<p>Loading...</p>}>\r\n              <Switch>\r\n                <Route exact path='/' component={Home} />\r\n                <Route path='/login' component={Login} />\r\n                <Route path='/vessel/:id' component={Vessel} />\r\n                <Route path='/certificate/add' component={AddCertificate} />\r\n              </Switch>\r\n            </Suspense>\r\n        </div>\r\n      )\r\n    }\r\n    return (\r\n      <div>\r\n        <Header\r\n          appName={this.props.appName}\r\n          currentUser={this.props.currentUser} />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n// App.contextTypes = {\r\n//   router: PropTypes.object.isRequired\r\n// };\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(App)\r\n","import ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport React from 'react';\r\nimport { store, history} from './store';\r\n\r\nimport { Route, Switch } from 'react-router-dom';\r\nimport { ConnectedRouter } from 'connected-react-router';\r\n\r\nimport App from './components/App';\r\n\r\nReactDOM.render((\r\n  <Provider store={store}>\r\n    <ConnectedRouter history={history}>\r\n      <Switch>\r\n        <Route path=\"/\" component={App} />\r\n      </Switch>\r\n    </ConnectedRouter>\r\n  </Provider>\r\n\r\n), document.getElementById('root'));\r\n"],"sourceRoot":""}